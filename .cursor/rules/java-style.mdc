---
globs: *.java
description: Java style, naming, and safety rules for Qualia
---
# Java Style Rules (Qualia)

- Prefer explicit, descriptive names; avoid 1â€“2 character identifiers.
- Keep `psi` bounded in [0,1]; use `belief_raw` when emitting uncapped beliefs.
- Use records for immutable value types (e.g., `ModelParameters`).
- Always log and bound seeds; for multi-chain, derive per-chain seeds via `baseSeed + c*PHI64`.
- Add JSON fields using snake_case (e.g., `eps_rk4`, `eps_taylor`, `eps_geom`).
- Export metrics via `MetricsRegistry` with subsystem prefixes (e.g., `hmc_chain_XX_*`).
- Ensure deterministic tests with fixed seeds and assert tight tolerances.
- For CLI parsing, support `key=value` overrides and document defaults.
- When adding detectors/samplers, expose env/CLI knobs and structured outputs (JSON/JSONL).

